@using TErm.Models
@using Term3.Models
@model ProjectModel

@{
    ViewBag.Title = "Задачи";
}

<div>
    <div>
        @using (Html.BeginForm("Issues", "Issue", FormMethod.Post))
        {
            <input type="submit" name="action" value="Получить рекомендацию" style="border-radius:5px; color: #000000; background-color: #bdbdbd; width: 172px; height: 30px;" />           
            <div>
                <table class="issues-table">
                    <tr>
                        <th>Название</th>
                        <th>Описание</th>
                        <th>Исполнитель</th>
                        <th>Оценочное время (в часах)</th>
                        <th>Потраченное время</th>
                        <th></th>
                    </tr>
                    @foreach (IssuesModel issue in Model.issuesList)
                    {
                        <tr>
                            <td>@issue.title</td>
                            <td>@issue.description</td>
                            @{string assigneesString = ""; }
                            @for (int i = 0; i < issue.assignees.Count; i++)
                            {
                                assigneesString += issue.assignees[i].username;
                                if (i != issue.assignees.Count - 1)
                                {
                                    assigneesString += ", ";
                                }
                            }
                            @if (assigneesString != "")
                            {
                                <td>@assigneesString</td>
                            }
                            else
                            {
                                <td>-</td>
                            }
                            <td>@issue.time_stats.time_estimate</td>
                            <td>@issue.time_stats.total_time_spent</td>
                            <td><button type="submit" name="action" value="@issue.id">Выбрать исполнителя</button></td>
                        </tr>
                    }
                    <tr>
                        <td>Общее оценочное время проекта (в часах)</td>
                        <td colspan="5"><b>@Model.projectTime</b></td>
                    </tr>
                </table>
            </div>
        }
    </div>
</div>